<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>btx: btx.diagnostics.run.RunDiagnostics Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">btx
   </div>
   <div id="projectbrief">Framework for SFX data analysis at LCLS.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacebtx.html">btx</a></li><li class="navelem"><a class="el" href="namespacebtx_1_1diagnostics.html">diagnostics</a></li><li class="navelem"><a class="el" href="namespacebtx_1_1diagnostics_1_1run.html">run</a></li><li class="navelem"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html">RunDiagnostics</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">btx.diagnostics.run.RunDiagnostics Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to compute powders and trajectories of various image statistics and event characteristics for a given run.  
 <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5edd57ebff76e6dabf009f8555f6cb7a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a5edd57ebff76e6dabf009f8555f6cb7a">__init__</a> (self, exp, run, det_type)</td></tr>
<tr class="separator:a5edd57ebff76e6dabf009f8555f6cb7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0685bc4061b5fe5bda56dcc9dbbca67d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a0685bc4061b5fe5bda56dcc9dbbca67d">compute_base_powders</a> (self, img)</td></tr>
<tr class="memdesc:a0685bc4061b5fe5bda56dcc9dbbca67d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the base powders: max, sum, sum of squares.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a0685bc4061b5fe5bda56dcc9dbbca67d">More...</a><br /></td></tr>
<tr class="separator:a0685bc4061b5fe5bda56dcc9dbbca67d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5279ad5cd718777a1f246eb60e036ed9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a5279ad5cd718777a1f246eb60e036ed9">finalize_powders</a> (self)</td></tr>
<tr class="memdesc:a5279ad5cd718777a1f246eb60e036ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalize powders calculation at end of the run, computing the max, avg, and std dev (and gain mode counts if applicable).  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a5279ad5cd718777a1f246eb60e036ed9">More...</a><br /></td></tr>
<tr class="separator:a5279ad5cd718777a1f246eb60e036ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26ea5816cedd48c6d15184c46ffb6fc0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a26ea5816cedd48c6d15184c46ffb6fc0">save_powders</a> (self, outdir, raw_img=False)</td></tr>
<tr class="memdesc:a26ea5816cedd48c6d15184c46ffb6fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save powders to output directory.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a26ea5816cedd48c6d15184c46ffb6fc0">More...</a><br /></td></tr>
<tr class="separator:a26ea5816cedd48c6d15184c46ffb6fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c4805b7783bbb3b613c2ff774ae386b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a9c4805b7783bbb3b613c2ff774ae386b">save_traces</a> (self, outdir, raw_img=False)</td></tr>
<tr class="memdesc:a9c4805b7783bbb3b613c2ff774ae386b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save trajectories of statistics to output directory.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a9c4805b7783bbb3b613c2ff774ae386b">More...</a><br /></td></tr>
<tr class="separator:a9c4805b7783bbb3b613c2ff774ae386b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39dedc132a9e356aebf62aec7062f20f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a39dedc132a9e356aebf62aec7062f20f">load_traces</a> (self, outdir, raw_img=False)</td></tr>
<tr class="memdesc:a39dedc132a9e356aebf62aec7062f20f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load previously saved trajectories of statistics.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a39dedc132a9e356aebf62aec7062f20f">More...</a><br /></td></tr>
<tr class="separator:a39dedc132a9e356aebf62aec7062f20f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a499495fa9602a5e41b10d0f914f60861"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a499495fa9602a5e41b10d0f914f60861">compute_stats</a> (self, evt, img)</td></tr>
<tr class="memdesc:a499495fa9602a5e41b10d0f914f60861"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the following image stats: mean, std deviation, max, min.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a499495fa9602a5e41b10d0f914f60861">More...</a><br /></td></tr>
<tr class="separator:a499495fa9602a5e41b10d0f914f60861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2695e26798c96182acf1747b4c84f24b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a2695e26798c96182acf1747b4c84f24b">finalize_stats</a> (self)</td></tr>
<tr class="memdesc:a2695e26798c96182acf1747b4c84f24b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gather stats from various ranks into single arrays in self.stats_final.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a2695e26798c96182acf1747b4c84f24b">More...</a><br /></td></tr>
<tr class="separator:a2695e26798c96182acf1747b4c84f24b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb9d60330835c147995b36b7552458c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a6bb9d60330835c147995b36b7552458c">get_gain_statistics</a> (self, raw, <a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae42e8c224e09f154d705887dbac0a2ec">gain_mode</a>='AML-L')</td></tr>
<tr class="memdesc:a6bb9d60330835c147995b36b7552458c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve statistics for a particular gain mode, specifically a map of the number of times a pixel has been in a certain gain mode and the number of pixels in that gain mode per event.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a6bb9d60330835c147995b36b7552458c">More...</a><br /></td></tr>
<tr class="separator:a6bb9d60330835c147995b36b7552458c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d505d4cc3dc298e572f6d92a10f592"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae7d505d4cc3dc298e572f6d92a10f592">compute_run_stats</a> (self, max_events=-1, mask=None, powder_only=False, threshold=None, <a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae42e8c224e09f154d705887dbac0a2ec">gain_mode</a>=None, raw_img=False)</td></tr>
<tr class="memdesc:ae7d505d4cc3dc298e572f6d92a10f592"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute powders and per-image statistics.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae7d505d4cc3dc298e572f6d92a10f592">More...</a><br /></td></tr>
<tr class="separator:ae7d505d4cc3dc298e572f6d92a10f592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41827ab91c1b0bd5a4adeebda2dbddca"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a41827ab91c1b0bd5a4adeebda2dbddca">visualize_powder</a> (self, tag='max', vmin=-1e5, vmax=1e5, output=None, figsize=12, dpi=300)</td></tr>
<tr class="memdesc:a41827ab91c1b0bd5a4adeebda2dbddca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Visualize the powder image: the distribution of intensities as a histogram and the positive and negative-valued pixels on the assembled detector image.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a41827ab91c1b0bd5a4adeebda2dbddca">More...</a><br /></td></tr>
<tr class="separator:a41827ab91c1b0bd5a4adeebda2dbddca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7d8f979356630e066fa93686e6acacc"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ac7d8f979356630e066fa93686e6acacc">visualize_stats</a> (self, output=None)</td></tr>
<tr class="memdesc:ac7d8f979356630e066fa93686e6acacc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plot trajectories of run statistics.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ac7d8f979356630e066fa93686e6acacc">More...</a><br /></td></tr>
<tr class="separator:ac7d8f979356630e066fa93686e6acacc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b6cbeb1c12cc1aee91eda03e60e4b0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a14b6cbeb1c12cc1aee91eda03e60e4b0">visualize_stats_hv_html</a> (self, str output, list keys, str color_by)</td></tr>
<tr class="memdesc:a14b6cbeb1c12cc1aee91eda03e60e4b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an "interactive" Holoviews plot embedded in HTML.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a14b6cbeb1c12cc1aee91eda03e60e4b0">More...</a><br /></td></tr>
<tr class="separator:a14b6cbeb1c12cc1aee91eda03e60e4b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4925f139d0d235827a11c77c56073749"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a4925f139d0d235827a11c77c56073749">visualize_gain_frequency</a> (self, output=None)</td></tr>
<tr class="memdesc:a4925f139d0d235827a11c77c56073749"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plot the distribution of the frequency with which each pixel appears in a particular gain mode.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a4925f139d0d235827a11c77c56073749">More...</a><br /></td></tr>
<tr class="separator:a4925f139d0d235827a11c77c56073749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d6a724c5f4e6b01b7805fe939a68b98"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a1d6a724c5f4e6b01b7805fe939a68b98">visualize_energy_stats</a> (self, output=None, outlier_threshold=-np.inf)</td></tr>
<tr class="memdesc:a1d6a724c5f4e6b01b7805fe939a68b98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plot the number of incoming photons per event, the number of incoming photons versus the mean image intensity, and the beam energy versus photon energy.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a1d6a724c5f4e6b01b7805fe939a68b98">More...</a><br /></td></tr>
<tr class="separator:a1d6a724c5f4e6b01b7805fe939a68b98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0afa7cbdf912838cfef3d8d99f3a4b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a3f0afa7cbdf912838cfef3d8d99f3a4b">visualize_stats_interactive</a> (self, y_key='mean', color_by='beam_energy_eV')</td></tr>
<tr class="memdesc:a3f0afa7cbdf912838cfef3d8d99f3a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Plot trajectories of run statistics, interactively.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a3f0afa7cbdf912838cfef3d8d99f3a4b">More...</a><br /></td></tr>
<tr class="separator:a3f0afa7cbdf912838cfef3d8d99f3a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6370b3865e24bce1da27fc487674e7f0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a6370b3865e24bce1da27fc487674e7f0">display_img_evt</a> (self, event_id, vmin=1, vmax=1e3, figsize=8, dpi=360, title=None, log=True, mask_negatives=True, method='pyplot')</td></tr>
<tr class="memdesc:a6370b3865e24bce1da27fc487674e7f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Display the detector image corresponding to a given event ID.  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a6370b3865e24bce1da27fc487674e7f0">More...</a><br /></td></tr>
<tr class="separator:a6370b3865e24bce1da27fc487674e7f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac027b752c66784836c798f977f955f0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#aac027b752c66784836c798f977f955f0">check_first_evt</a> (self, mask=None, scale_factor=5, n_images=5)</td></tr>
<tr class="memdesc:aac027b752c66784836c798f977f955f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the first event of the run should be excluded; it's considered an outlier if mean_0 &gt; &lt; mean_n + scale_factor * std_n &gt; where n ranges from [1,n_images).  <a href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#aac027b752c66784836c798f977f955f0">More...</a><br /></td></tr>
<tr class="separator:aac027b752c66784836c798f977f955f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af6e8999e5fcf360f9c5989122742f95c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#af6e8999e5fcf360f9c5989122742f95c">psi</a></td></tr>
<tr class="separator:af6e8999e5fcf360f9c5989122742f95c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a96242fa41d479371d59b3a4b8d1fcff9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a96242fa41d479371d59b3a4b8d1fcff9">pixel_index_map</a></td></tr>
<tr class="separator:a96242fa41d479371d59b3a4b8d1fcff9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae31b33353c43d17cccd89809bab70a0c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae31b33353c43d17cccd89809bab70a0c">powders</a></td></tr>
<tr class="separator:ae31b33353c43d17cccd89809bab70a0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d785c2ddcb9bf2d01ebed549838e995"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a3d785c2ddcb9bf2d01ebed549838e995">stats</a></td></tr>
<tr class="separator:a3d785c2ddcb9bf2d01ebed549838e995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a072a4b0c92893e0b7fc1eea72f15b62c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a072a4b0c92893e0b7fc1eea72f15b62c">gain_traj</a></td></tr>
<tr class="separator:a072a4b0c92893e0b7fc1eea72f15b62c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94525f6b19b23f66639baf6edc5b4a21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a94525f6b19b23f66639baf6edc5b4a21">gain_map</a></td></tr>
<tr class="separator:a94525f6b19b23f66639baf6edc5b4a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae42e8c224e09f154d705887dbac0a2ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#ae42e8c224e09f154d705887dbac0a2ec">gain_mode</a></td></tr>
<tr class="separator:ae42e8c224e09f154d705887dbac0a2ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c2cf255df6ba2472ba55105b21bda62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a8c2cf255df6ba2472ba55105b21bda62">comm</a></td></tr>
<tr class="separator:a8c2cf255df6ba2472ba55105b21bda62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd02b3c966b3fafa613c54ea6fa084a7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#acd02b3c966b3fafa613c54ea6fa084a7">rank</a></td></tr>
<tr class="separator:acd02b3c966b3fafa613c54ea6fa084a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae5a04c9d2ca79717504075c6e16fff5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#aae5a04c9d2ca79717504075c6e16fff5">size</a></td></tr>
<tr class="separator:aae5a04c9d2ca79717504075c6e16fff5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63baedc79418959be6fcd6bb593298d8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a63baedc79418959be6fcd6bb593298d8">powders_final</a></td></tr>
<tr class="separator:a63baedc79418959be6fcd6bb593298d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6137d3e727f62d3cde7b5a950b61fe88"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a6137d3e727f62d3cde7b5a950b61fe88">panel_mask</a></td></tr>
<tr class="separator:a6137d3e727f62d3cde7b5a950b61fe88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13fdea5f2d1651327bfe3e5d4a116c5f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a13fdea5f2d1651327bfe3e5d4a116c5f">stats_final</a></td></tr>
<tr class="separator:a13fdea5f2d1651327bfe3e5d4a116c5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90083bf2599854b654c3c7a25ba38a8d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classbtx_1_1diagnostics_1_1run_1_1RunDiagnostics.html#a90083bf2599854b654c3c7a25ba38a8d">modes</a></td></tr>
<tr class="separator:a90083bf2599854b654c3c7a25ba38a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to compute powders and trajectories of various image statistics and event characteristics for a given run. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a5edd57ebff76e6dabf009f8555f6cb7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5edd57ebff76e6dabf009f8555f6cb7a">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>exp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>run</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>det_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aac027b752c66784836c798f977f955f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac027b752c66784836c798f977f955f0">&#9670;&nbsp;</a></span>check_first_evt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.check_first_evt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>scale_factor</em> = <code>5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>n_images</em> = <code>5</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the first event of the run should be excluded; it's considered an outlier if mean_0 &gt; &lt; mean_n + scale_factor * std_n &gt; where n ranges from [1,n_images). </p>
<p>If any of the first few events are None, exclude the first image to simplify matters.</p>
<h2><a class="anchor" id="autotoc_md40"></a>
Parameters</h2>
<p>mask : np.ndarray, shape (n_panels, n_x, n_y) binary mask file or array in unassembled psana shape, optional scale_factor : float parameter that tunes how conservative outlier rejection is n_images : int number of total images to compare, including first</p>
<h2><a class="anchor" id="autotoc_md41"></a>
Returns:</h2>
<p>exclude : bool if True, first event was detected as an outlier </p>

</div>
</div>
<a id="a0685bc4061b5fe5bda56dcc9dbbca67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0685bc4061b5fe5bda56dcc9dbbca67d">&#9670;&nbsp;</a></span>compute_base_powders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.compute_base_powders </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>img</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the base powders: max, sum, sum of squares. </p>
<h2><a class="anchor" id="autotoc_md28"></a>
Parameters</h2>
<p>img : numpy.ndarray, 3d unassembled, calibrated images of shape (n_panels, n_x, n_y) </p>

</div>
</div>
<a id="ae7d505d4cc3dc298e572f6d92a10f592"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d505d4cc3dc298e572f6d92a10f592">&#9670;&nbsp;</a></span>compute_run_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.compute_run_stats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>max_events</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>powder_only</em> = <code>False</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gain_mode</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_img</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute powders and per-image statistics. </p>
<p>If a mask is provided, it is only applied to the stats trajectories, not in computing the powder.</p>
<h2><a class="anchor" id="autotoc_md34"></a>
Parameters</h2>
<p>max_events : int number of images to process; if -1, process entire run mask : str or np.ndarray, shape (n_panels, n_x, n_y) binary mask file or array in unassembled psana shape, optional powder_only : bool if True, only compute the powder pattern threshold : float if supplied, exclude events whose mean is above this value gain_mode : str gain mode to retrieve statistics for, e.g. 'AML-L' raw_img : bool if True, analyze raw rather than calibrated images </p>

</div>
</div>
<a id="a499495fa9602a5e41b10d0f914f60861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a499495fa9602a5e41b10d0f914f60861">&#9670;&nbsp;</a></span>compute_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.compute_stats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>evt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>img</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compute the following image stats: mean, std deviation, max, min. </p>
<h2><a class="anchor" id="autotoc_md32"></a>
Parameters</h2>
<p>evt : psana.Event object individual psana event <br  />
 img : numpy.ndarray, 3d unassembled, calibrated images of shape (n_panels, n_x, n_y) </p>

</div>
</div>
<a id="a6370b3865e24bce1da27fc487674e7f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6370b3865e24bce1da27fc487674e7f0">&#9670;&nbsp;</a></span>display_img_evt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.display_img_evt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>event_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vmin</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vmax</em> = <code>1e3</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>figsize</em> = <code>8</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dpi</em> = <code>360</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>title</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>log</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>mask_negatives</em> = <code>True</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>method</em> = <code>'pyplot'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Display the detector image corresponding to a given event ID. </p>
<h2><a class="anchor" id="autotoc_md39"></a>
Parameters</h2>
<p>event_id : int Index of the desired event vmin : float Lowest pixel value figsize : int Figure size dpi : int Figure dots per inch title : str or None Figure title log : bool Whether the detector image is displayed on linear or log scale. mask_negatives: bool Whether negative intensity pixels should be masked. method: str options: 'pyplot' (default) or 'holoviews' </p>

</div>
</div>
<a id="a5279ad5cd718777a1f246eb60e036ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5279ad5cd718777a1f246eb60e036ed9">&#9670;&nbsp;</a></span>finalize_powders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.finalize_powders </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalize powders calculation at end of the run, computing the max, avg, and std dev (and gain mode counts if applicable). </p>

</div>
</div>
<a id="a2695e26798c96182acf1747b4c84f24b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2695e26798c96182acf1747b4c84f24b">&#9670;&nbsp;</a></span>finalize_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.finalize_stats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gather stats from various ranks into single arrays in self.stats_final. </p>

</div>
</div>
<a id="a6bb9d60330835c147995b36b7552458c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bb9d60330835c147995b36b7552458c">&#9670;&nbsp;</a></span>get_gain_statistics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.get_gain_statistics </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>gain_mode</em> = <code>'AML-L'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve statistics for a particular gain mode, specifically a map of the number of times a pixel has been in a certain gain mode and the number of pixels in that gain mode per event. </p>
<h2><a class="anchor" id="autotoc_md33"></a>
Parameters</h2>
<p>raw : ndarray, shape (det_shape) uncalibrated image gain_mode : str gain mode to retrieve statistics for, e.g. 'AML-L' </p>

</div>
</div>
<a id="a39dedc132a9e356aebf62aec7062f20f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39dedc132a9e356aebf62aec7062f20f">&#9670;&nbsp;</a></span>load_traces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.load_traces </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_img</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load previously saved trajectories of statistics. </p>
<h2><a class="anchor" id="autotoc_md31"></a>
Parameters</h2>
<p>outdir: str path to directory where traces have been saved raw_img : bool if True, load trace files with _raw nomenclature </p>

</div>
</div>
<a id="a26ea5816cedd48c6d15184c46ffb6fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26ea5816cedd48c6d15184c46ffb6fc0">&#9670;&nbsp;</a></span>save_powders()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.save_powders </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_img</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save powders to output directory. </p>
<h2><a class="anchor" id="autotoc_md29"></a>
Parameters</h2>
<p>output : str path to directory in which to save powders, optional raw_img : bool if True, save powder files with _raw nomenclature </p>

</div>
</div>
<a id="a9c4805b7783bbb3b613c2ff774ae386b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c4805b7783bbb3b613c2ff774ae386b">&#9670;&nbsp;</a></span>save_traces()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.save_traces </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outdir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>raw_img</em> = <code>False</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save trajectories of statistics to output directory. </p>
<h2><a class="anchor" id="autotoc_md30"></a>
Parameters</h2>
<p>output : str path to directory in which to save traces, optional raw_img : bool if True, save powder files with _raw nomenclature </p>

</div>
</div>
<a id="a1d6a724c5f4e6b01b7805fe939a68b98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d6a724c5f4e6b01b7805fe939a68b98">&#9670;&nbsp;</a></span>visualize_energy_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_energy_stats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>outlier_threshold</em> = <code>-np.inf</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plot the number of incoming photons per event, the number of incoming photons versus the mean image intensity, and the beam energy versus photon energy. </p>
<p>Energies are in eV.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Parameters</h2>
<p>output : str path for optionally saving plot to disk outlier_threshold : float mean intensity threshold for considering images outliers </p>

</div>
</div>
<a id="a4925f139d0d235827a11c77c56073749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4925f139d0d235827a11c77c56073749">&#9670;&nbsp;</a></span>visualize_gain_frequency()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_gain_frequency </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plot the distribution of the frequency with which each pixel appears in a particular gain mode. </p>
<h2><a class="anchor" id="autotoc_md36"></a>
Parameters</h2>
<p>output : str path for optionally saving plot to disk </p>

</div>
</div>
<a id="a41827ab91c1b0bd5a4adeebda2dbddca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41827ab91c1b0bd5a4adeebda2dbddca">&#9670;&nbsp;</a></span>visualize_powder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_powder </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tag</em> = <code>'max'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vmin</em> = <code>-1e5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>vmax</em> = <code>1e5</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>figsize</em> = <code>12</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dpi</em> = <code>300</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Visualize the powder image: the distribution of intensities as a histogram and the positive and negative-valued pixels on the assembled detector image. </p>

</div>
</div>
<a id="ac7d8f979356630e066fa93686e6acacc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7d8f979356630e066fa93686e6acacc">&#9670;&nbsp;</a></span>visualize_stats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_stats </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>output</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plot trajectories of run statistics. </p>
<h2><a class="anchor" id="autotoc_md35"></a>
Parameters</h2>
<p>output : str path for optionally saving plot to disk </p>

</div>
</div>
<a id="a14b6cbeb1c12cc1aee91eda03e60e4b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b6cbeb1c12cc1aee91eda03e60e4b0">&#9670;&nbsp;</a></span>visualize_stats_hv_html()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_stats_hv_html </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>keys</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">str&#160;</td>
          <td class="paramname"><em>color_by</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an "interactive" Holoviews plot embedded in HTML. </p>
<pre class="fragment">   Allows for selection of which statistics to display.

   @param output (str) Path to save the output HTML.
   @param keys (list) List of keys in `stats_final` to plot.
   @param color_by (str) Key to data to color the scatter plot points by.
</pre> 
</div>
</div>
<a id="a3f0afa7cbdf912838cfef3d8d99f3a4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f0afa7cbdf912838cfef3d8d99f3a4b">&#9670;&nbsp;</a></span>visualize_stats_interactive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def btx.diagnostics.run.RunDiagnostics.visualize_stats_interactive </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>y_key</em> = <code>'mean'</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>color_by</em> = <code>'beam_energy_eV'</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Plot trajectories of run statistics, interactively. </p>
<h2><a class="anchor" id="autotoc_md38"></a>
Parameters</h2>
<p>y_key : str self.stats_final key to plot color_by : str self.stats_final key used to color </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a8c2cf255df6ba2472ba55105b21bda62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c2cf255df6ba2472ba55105b21bda62">&#9670;&nbsp;</a></span>comm</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.comm</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a94525f6b19b23f66639baf6edc5b4a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94525f6b19b23f66639baf6edc5b4a21">&#9670;&nbsp;</a></span>gain_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.gain_map</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae42e8c224e09f154d705887dbac0a2ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae42e8c224e09f154d705887dbac0a2ec">&#9670;&nbsp;</a></span>gain_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.gain_mode</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a072a4b0c92893e0b7fc1eea72f15b62c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a072a4b0c92893e0b7fc1eea72f15b62c">&#9670;&nbsp;</a></span>gain_traj</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.gain_traj</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a90083bf2599854b654c3c7a25ba38a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90083bf2599854b654c3c7a25ba38a8d">&#9670;&nbsp;</a></span>modes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.modes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6137d3e727f62d3cde7b5a950b61fe88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6137d3e727f62d3cde7b5a950b61fe88">&#9670;&nbsp;</a></span>panel_mask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.panel_mask</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a96242fa41d479371d59b3a4b8d1fcff9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96242fa41d479371d59b3a4b8d1fcff9">&#9670;&nbsp;</a></span>pixel_index_map</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.pixel_index_map</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae31b33353c43d17cccd89809bab70a0c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae31b33353c43d17cccd89809bab70a0c">&#9670;&nbsp;</a></span>powders</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.powders</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a63baedc79418959be6fcd6bb593298d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63baedc79418959be6fcd6bb593298d8">&#9670;&nbsp;</a></span>powders_final</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.powders_final</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="af6e8999e5fcf360f9c5989122742f95c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6e8999e5fcf360f9c5989122742f95c">&#9670;&nbsp;</a></span>psi</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.psi</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="acd02b3c966b3fafa613c54ea6fa084a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd02b3c966b3fafa613c54ea6fa084a7">&#9670;&nbsp;</a></span>rank</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.rank</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aae5a04c9d2ca79717504075c6e16fff5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae5a04c9d2ca79717504075c6e16fff5">&#9670;&nbsp;</a></span>size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.size</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3d785c2ddcb9bf2d01ebed549838e995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d785c2ddcb9bf2d01ebed549838e995">&#9670;&nbsp;</a></span>stats</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.stats</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a13fdea5f2d1651327bfe3e5d4a116c5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13fdea5f2d1651327bfe3e5d4a116c5f">&#9670;&nbsp;</a></span>stats_final</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">btx.diagnostics.run.RunDiagnostics.stats_final</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>btx/diagnostics/<a class="el" href="run_8py.html">run.py</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Nov 14 2023 00:56:35 for btx by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
